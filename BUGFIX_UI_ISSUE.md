# ğŸ› ç•Œé¢æ··ä¹±é—®é¢˜ä¿®å¤è¯´æ˜

## é—®é¢˜æè¿°

APK æ‰“å¼€åç•Œé¢æ˜¾ç¤ºæ··ä¹±ï¼Œæ ·å¼ä¸æ­£ç¡®ï¼Œèµ„æºæ— æ³•åŠ è½½ã€‚

é”™è¯¯ä¿¡æ¯ï¼š
```
File: [assets/26c82245a5fa87861645212576da5b41.jpg]
```

---

## ğŸ” é—®é¢˜æ ¹æº

### 1. åŠ¨æ€ç”Ÿæˆçš„ assets ç›®å½•
- é¡¹ç›®ä¸­æœ‰ä¸€ä¸ª `assets` ç›®å½•åŒ…å«åŠ¨æ€ç”Ÿæˆçš„å›¾ç‰‡æ–‡ä»¶
- è¿™ä¸ªç›®å½•åº”è¯¥è¢« `.gitignore` å¿½ç•¥
- ä½†æ²¡æœ‰è¢«æ­£ç¡®é…ç½®ï¼Œå¯¼è‡´ä¸´æ—¶æ–‡ä»¶è¢«æäº¤

### 2. Next.js é™æ€å¯¼å‡ºé…ç½®é—®é¢˜
- ä¹‹å‰çš„é…ç½®ä½¿ç”¨äº† `output: 'export'` ä½†æ²¡æœ‰æ­£ç¡®å¤„ç†èµ„æºè·¯å¾„
- Capacitor çš„ `webDir` é…ç½®æŒ‡å‘é”™è¯¯ç›®å½•

### 3. èµ„æºè·¯å¾„æ˜ å°„é—®é¢˜
- Next.js ç”Ÿæˆçš„èµ„æºè·¯å¾„æ˜¯ç»å¯¹è·¯å¾„ï¼ˆ`/_next/static/...`ï¼‰
- éœ€è¦ç¡®ä¿ Capacitor æ­£ç¡®æ˜ å°„è¿™äº›è·¯å¾„

---

## âœ… ä¿®å¤æ–¹æ¡ˆ

### 1. ä¿®å¤ `next.config.ts`

**ä¿®å¤å‰**ï¼š
```typescript
const nextConfig: NextConfig = {
  output: 'export',
  trailingSlash: true,
  basePath: '',
  assetPrefix: '',
  // ...
};
```

**ä¿®å¤å**ï¼š
```typescript
const nextConfig: NextConfig = {
  output: 'export',  // å¯ç”¨é™æ€å¯¼å‡º
  images: {
    unoptimized: true,  // é™æ€å¯¼å‡ºå¿…é¡»ç¦ç”¨ä¼˜åŒ–
    remotePatterns: [
      {
        protocol: 'https',
        hostname: 'lf-coze-web-cdn.coze.cn',
        pathname: '/**',
      },
    ],
  },
};
```

### 2. ä¿®å¤ `capacitor.config.ts`

**ä¿®å¤å‰**ï¼š
```typescript
const config: CapacitorConfig = {
  webDir: '.next',  // âŒ é”™è¯¯ç›®å½•
  // ...
};
```

**ä¿®å¤å**ï¼š
```typescript
const config: CapacitorConfig = {
  webDir: 'out',  // âœ… æ­£ç¡®ç›®å½•ï¼ˆé™æ€å¯¼å‡ºè¾“å‡ºï¼‰
  server: {
    androidScheme: 'https'
  },
  // ...
};
```

### 3. ä¿®å¤ `.gitignore`

**æ·»åŠ **ï¼š
```gitignore
# Dynamic generated assets
assets/
```

---

## ğŸ“‹ ä¿®å¤å†…å®¹æ€»ç»“

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|---------|
| `next.config.ts` | ç®€åŒ–é…ç½®ï¼Œç¡®ä¿é™æ€å¯¼å‡ºæ­£ç¡® |
| `capacitor.config.ts` | ä¿®å¤ webDir æŒ‡å‘ out ç›®å½• |
| `.gitignore` | æ·»åŠ  assets/ ç›®å½•ï¼Œå¿½ç•¥åŠ¨æ€ç”Ÿæˆçš„æ–‡ä»¶ |

---

## ğŸ¯ é¢„æœŸæ•ˆæœ

ä¿®å¤åï¼ŒAPK åº”è¯¥ï¼š
- âœ… æ­£ç¡®æ˜¾ç¤ºç•Œé¢æ ·å¼
- âœ… æ‰€æœ‰èµ„æºï¼ˆCSSã€JSã€å›¾ç‰‡ï¼‰æ­£å¸¸åŠ è½½
- âœ… åŠŸèƒ½å®Œå…¨æ­£å¸¸
- âœ… æ— ç•Œé¢æ··ä¹±é—®é¢˜

---

## ğŸ“± éªŒè¯æ­¥éª¤

### 1. ç­‰å¾… GitHub Actions æ„å»ºå®Œæˆ

è®¿é—®ï¼šhttps://github.com/awlei/child-product-design-assistant/actions

### 2. ä¸‹è½½æœ€æ–° APK

1. ç‚¹å‡»æˆåŠŸçš„æ„å»ºä»»åŠ¡
2. åœ¨ "Artifacts" ä¸­ä¸‹è½½ `app-debug-apk`
3. è§£å‹è·å¾— `app-debug.apk`

### 3. å®‰è£…å¹¶æµ‹è¯•

1. å¸è½½æ—§ç‰ˆæœ¬ APKï¼ˆå¦‚æœæœ‰ï¼‰
2. å®‰è£…æ–°ç‰ˆæœ¬ APK
3. æ‰“å¼€åº”ç”¨
4. æ£€æŸ¥ï¼š
   - ç•Œé¢æ˜¯å¦æ­£å¸¸æ˜¾ç¤º
   - æ ·å¼æ˜¯å¦æ­£ç¡®
   - åŠŸèƒ½æ˜¯å¦æ­£å¸¸

---

## â±ï¸ æ„å»ºæ—¶é—´

| é˜¶æ®µ | æ—¶é—´ |
|------|------|
| å®‰è£…ä¾èµ– | 1-2åˆ†é’Ÿ |
| Next.js æ„å»º | 3-5åˆ†é’Ÿ |
| Android å¹³å°åŒæ­¥ | 2-3åˆ†é’Ÿ |
| APK æ„å»º | 3-5åˆ†é’Ÿ |
| **æ€»è®¡** | **10-15åˆ†é’Ÿ** |

---

## ğŸ“ æŠ€æœ¯è¯´æ˜

### Next.js é™æ€å¯¼å‡º

```bash
output: 'export'
```

- å°† Next.js åº”ç”¨å¯¼å‡ºä¸ºé™æ€ HTML/CSS/JS æ–‡ä»¶
- é€‚ç”¨äº Capacitorã€CDN ç­‰é™æ€éƒ¨ç½²åœºæ™¯
- ä¸éœ€è¦ Node.js æœåŠ¡å™¨

### Capacitor é…ç½®

```typescript
webDir: 'out'
```

- æŒ‡å®šé™æ€æ–‡ä»¶ç›®å½•
- Capacitor å†…ç½®æœåŠ¡å™¨ä¼šåŠ è½½è¿™ä¸ªç›®å½•
- è‡ªåŠ¨å¤„ç†è·¯ç”±å’Œèµ„æºæ˜ å°„

### èµ„æºè·¯å¾„

Next.js é™æ€å¯¼å‡ºç”Ÿæˆçš„è·¯å¾„ï¼š
- CSS: `/_next/static/chunks/xxx.css`
- JS: `/_next/static/chunks/xxx.js`
- å›¾ç‰‡: `/xxx.svg` (æ¥è‡ª public ç›®å½•)

Capacitor ä¼šå°†è¿™äº›è·¯å¾„æ˜ å°„åˆ° `out` ç›®å½•ï¼š
- `/_next/` â†’ `out/_next/`
- `/xxx.svg` â†’ `out/xxx.svg`

---

## â“ å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨

### å¯èƒ½çš„åŸå› 

1. **ç¼“å­˜é—®é¢˜**
   - è§£å†³ï¼šå¸è½½æ—§ç‰ˆæœ¬ï¼Œé‡æ–°å®‰è£…

2. **æ„å»ºå¤±è´¥**
   - è§£å†³ï¼šæ£€æŸ¥ GitHub Actions æ—¥å¿—

3. **å…¶ä»–é…ç½®é—®é¢˜**
   - è§£å†³ï¼šæŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

### è·å–å¸®åŠ©

1. æŸ¥çœ‹æ„å»ºæ—¥å¿—ï¼š
   https://github.com/awlei/child-product-design-assistant/actions

2. æ£€æŸ¥é”™è¯¯è¯¦æƒ…ï¼š
   ç‚¹å‡»å¤±è´¥çš„æ­¥éª¤æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

3. è”ç³»å¼€å‘è€…ï¼š
   æä¾›é”™è¯¯æˆªå›¾å’Œæ„å»ºæ—¥å¿—

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Next.js é™æ€å¯¼å‡º](https://nextjs.org/docs/app/building-your-application/deploying/static-exports)
- [Capacitor é…ç½®](https://capacitorjs.com/docs/config)
- [GitHub Actions æ„å»º](https://docs.github.com/en/actions)

---

**âœ… ä¿®å¤å·²å®Œæˆï¼è¯·ç­‰å¾…10-15åˆ†é’Ÿï¼Œç„¶åä¸‹è½½æ–°ç‰ˆæœ¬APKè¿›è¡Œæµ‹è¯•ï¼**
